{"code":"(this.webpackJsonpMorgan_site_project=this.webpackJsonpMorgan_site_project||[]).push([[42],{165:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"startInputShims\",(function(){return p}));var o=n(0),r=n(22),i=new WeakMap,a=function(e,t,n,o){void 0===o&&(o=0),i.has(e)!==n&&(n?u(e,t,o):s(e,t))},c=function(e){return e===e.getRootNode().activeElement},u=function(e,t,n){var o=t.parentNode,r=t.cloneNode(!1);r.classList.add(\"cloned-input\"),r.tabIndex=-1,o.appendChild(r),i.set(e,r);var a=\"rtl\"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents=\"none\",t.style.transform=\"translate3d(\"+a+\"px,\"+n+\"px,0) scale(0)\"},s=function(e,t){var n=i.get(e);n&&(i.delete(e),n.remove()),e.style.pointerEvents=\"\",t.style.transform=\"\"},l=\"input, textarea, [no-blur]\",d=function(e,t,n,o){var r=e.top,i=e.bottom,a=t.top,c=a+15,u=.75*Math.min(t.bottom,o-n)-i,s=c-r,l=Math.round(u<0?-u:s>0?-s:0),d=Math.min(l,r-a),f=Math.abs(d)/.3;return{scrollAmount:d,scrollDuration:Math.min(400,Math.max(150,f)),scrollPadding:n,inputSafeY:4-(r-c)}},f=function(e,t,n,r,i){return Object(o.b)(void 0,void 0,void 0,(function(){var c,u,s,l,f,v;return Object(o.d)(this,(function(m){switch(m.label){case 0:return n||r?(c=function(e,t,n){var o=e.closest(\"ion-item,[ion-item]\")||e;return d(o.getBoundingClientRect(),t.getBoundingClientRect(),n,e.ownerDocument.defaultView.innerHeight)}(e,n||r,i),n&&Math.abs(c.scrollAmount)<4?(t.focus(),[2]):(a(e,t,!0,c.inputSafeY),t.focus(),\"undefined\"===typeof window?[3,3]:(s=function(){return Object(o.b)(void 0,void 0,void 0,(function(){return Object(o.d)(this,(function(o){switch(o.label){case 0:return void 0!==u&&clearTimeout(u),window.removeEventListener(\"ionKeyboardDidShow\",l),window.removeEventListener(\"ionKeyboardDidShow\",s),n?[4,n.scrollByPoint(0,c.scrollAmount,c.scrollDuration)]:[3,2];case 1:o.sent(),o.label=2;case 2:return a(e,t,!1,c.inputSafeY),t.focus(),[2]}}))}))},l=function(){window.removeEventListener(\"ionKeyboardDidShow\",l),window.addEventListener(\"ionKeyboardDidShow\",s)},n?[4,n.getScrollElement()]:[3,2]))):[2];case 1:if(f=m.sent(),v=f.scrollHeight-f.clientHeight,c.scrollAmount>v-f.scrollTop)return\"password\"===t.type?(c.scrollAmount+=50,window.addEventListener(\"ionKeyboardDidShow\",l)):window.addEventListener(\"ionKeyboardDidShow\",s),u=setTimeout(s,1e3),[2];m.label=2;case 2:s(),m.label=3;case 3:return[2]}}))}))},v=function(e,t,n){if(t&&n){var o=t.x-n.x,r=t.y-n.y;return o*o+r*r>e*e}return!1},m=function(e,t){if(\"INPUT\"===e.tagName&&(!e.parentElement||\"ION-INPUT\"!==e.parentElement.tagName)&&(!e.parentElement||!e.parentElement.parentElement||\"ION-SEARCHBAR\"!==e.parentElement.parentElement.tagName)){var n=e.closest(\"ion-content\");if(null!==n){var o=n.$ionPaddingTimer;o&&clearTimeout(o),t>0?n.style.setProperty(\"--keyboard-offset\",t+\"px\"):n.$ionPaddingTimer=setTimeout((function(){n.style.setProperty(\"--keyboard-offset\",\"0px\")}),120)}}},p=function(e){var t=document,n=e.getNumber(\"keyboardHeight\",290),i=e.getBoolean(\"scrollAssist\",!0),u=e.getBoolean(\"hideCaretOnScroll\",!0),s=e.getBoolean(\"inputBlurring\",!0),d=e.getBoolean(\"scrollPadding\",!0),p=Array.from(t.querySelectorAll(\"ion-input, ion-textarea\")),b=new WeakMap,h=new WeakMap,g=function(e){return Object(o.b)(void 0,void 0,void 0,(function(){var t,s,l,d,m;return Object(o.d)(this,(function(o){switch(o.label){case 0:return e.componentOnReady?[4,e.componentOnReady()]:[3,2];case 1:o.sent(),o.label=2;case 2:return t=e.shadowRoot||e,s=t.querySelector(\"input\")||t.querySelector(\"textarea\"),l=e.closest(\"ion-content\"),d=l?null:e.closest(\"ion-footer\"),s?(l&&u&&!b.has(e)&&(m=function(e,t,n){if(!n||!t)return function(){};var o=function(n){c(t)&&a(e,t,n)},i=function(){return a(e,t,!1)},u=function(){return o(!0)},s=function(){return o(!1)};return Object(r.a)(n,\"ionScrollStart\",u),Object(r.a)(n,\"ionScrollEnd\",s),t.addEventListener(\"blur\",i),function(){Object(r.b)(n,\"ionScrollStart\",u),Object(r.b)(n,\"ionScrollEnd\",s),t.addEventListener(\"ionBlur\",i)}}(e,s,l),b.set(e,m)),(l||d)&&i&&!h.has(e)&&(m=function(e,t,n,o,i){var a,u=function(e){a=Object(r.m)(e)},s=function(u){if(a){var s=Object(r.m)(u);v(6,a,s)||c(t)||(u.preventDefault(),u.stopPropagation(),f(e,t,n,o,i))}};return e.addEventListener(\"touchstart\",u,!0),e.addEventListener(\"touchend\",s,!0),function(){e.removeEventListener(\"touchstart\",u,!0),e.removeEventListener(\"touchend\",s,!0)}}(e,s,l,d,n),h.set(e,m)),[2]):[2]}}))}))};s&&function(){var e=!0,t=!1,n=document,o=function(){t=!0},i=function(){e=!0},a=function(o){if(t)t=!1;else{var r=n.activeElement;if(r&&!r.matches(l)){var i=o.target;i!==r&&(i.matches(l)||i.closest(l)||(e=!1,setTimeout((function(){e||r.blur()}),50)))}}};Object(r.a)(n,\"ionScrollStart\",o),n.addEventListener(\"focusin\",i,!0),n.addEventListener(\"touchend\",a,!1)}(),d&&function(e){var t=document,n=function(t){m(t.target,e)},o=function(e){m(e.target,0)};t.addEventListener(\"focusin\",n),t.addEventListener(\"focusout\",o)}(n);for(var w=0,E=p;w<E.length;w++){var y=E[w];g(y)}t.addEventListener(\"ionInputDidLoad\",(function(e){g(e.detail)})),t.addEventListener(\"ionInputDidUnload\",(function(e){!function(e){var t;u&&((t=b.get(e))&&t(),b.delete(e)),i&&((t=h.get(e))&&t(),h.delete(e))}(e.detail)}))}}}]);","name":"static/js/42.2e090cdb.chunk.js","map":{"version":3,"sources":["static/js/42.2e090cdb.chunk.js"],"names":["this","push","165","module","__webpack_exports__","__webpack_require__","r","d","startInputShims","tslib__WEBPACK_IMPORTED_MODULE_0__","_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__","cloneMap","WeakMap","relocateInput","componentEl","inputEl","shouldRelocate","inputRelativeY","has","addClone","removeClone","isFocused","input","getRootNode","activeElement","parentEl","parentNode","clonedEl","cloneNode","classList","add","tabIndex","appendChild","set","tx","ownerDocument","dir","style","pointerEvents","transform","clone","get","delete","remove","SKIP_SELECTOR","calcScrollData","inputRect","contentRect","keyboardHeight","platformHeight","inputTop","top","inputBottom","bottom","visibleAreaTop","safeAreaTop","distanceToBottom","Math","min","distanceToTop","desiredScrollAmount","round","scrollAmount","duration","abs","scrollDuration","max","scrollPadding","inputSafeY","jsSetFocus","contentEl","footerEl","Object","scrollData","scrollContentTimeout_1","_scrollContent_","_doubleKeyboardEventListener_","scrollEl","totalScrollAmount","_a","label","itemEl","closest","getBoundingClientRect","defaultView","innerHeight","getScrollData","focus","window","undefined","clearTimeout","removeEventListener","scrollByPoint","sent","addEventListener","getScrollElement","scrollHeight","clientHeight","scrollTop","type","setTimeout","hasPointerMoved","threshold","startCoord","endCoord","deltaX","x","deltaY","y","setScrollPadding","tagName","parentElement","el","timer","setProperty","config","doc","document","getNumber","scrollAssist","getBoolean","hideCaret","inputBlurring","inputs","Array","from","querySelectorAll","hideCaretMap","scrollAssistMap","registerInput","inputRoot","rmFn","componentOnReady","shadowRoot","querySelector","scrollHideCaret","shouldHideCaret","onBlur","showCaret","enableHideCaretOnScroll","coord","touchStart","ev","touchEnd","preventDefault","stopPropagation","enableScrollAssist","focused","didScroll","onScroll","onFocusin","onTouchend","active","matches","tapped","target","blur","enableInputBlurring","onFocusout","enableScrollPadding","_i","inputs_1","length","detail","fn","unregisterInput"],"mappings":"CAACA,KAAsC,gCAAIA,KAAsC,iCAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE/FC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,mBAAmB,WAAa,OAAOI,KAC5F,IAAIC,EAAqCJ,EAAoB,GACzDK,EAAoDL,EAAoB,IAG7FM,EAAW,IAAIC,QAEfC,EAAgB,SAAuBC,EAAaC,EAASC,EAAgBC,QACxD,IAAnBA,IACFA,EAAiB,GAGfN,EAASO,IAAIJ,KAAiBE,IAI9BA,EACFG,EAASL,EAAaC,EAASE,GAE/BG,EAAYN,EAAaC,KAIzBM,EAAY,SAAmBC,GACjC,OAAOA,IAAUA,EAAMC,cAAcC,eAGnCL,EAAW,SAAkBL,EAAaC,EAASE,GAUrD,IAAIQ,EAAWV,EAAQW,WAEnBC,EAAWZ,EAAQa,WAAU,GACjCD,EAASE,UAAUC,IAAI,gBACvBH,EAASI,UAAY,EACrBN,EAASO,YAAYL,GACrBhB,EAASsB,IAAInB,EAAaa,GAC1B,IACIO,EAAiB,QADXpB,EAAYqB,cACTC,IAAgB,MAAQ,KACrCtB,EAAYuB,MAAMC,cAAgB,OAClCvB,EAAQsB,MAAME,UAAY,eAAiBL,EAAK,MAAQjB,EAAiB,kBAGvEG,EAAc,SAAqBN,EAAaC,GAClD,IAAIyB,EAAQ7B,EAAS8B,IAAI3B,GAErB0B,IACF7B,EAAS+B,OAAO5B,GAChB0B,EAAMG,UAGR7B,EAAYuB,MAAMC,cAAgB,GAClCvB,EAAQsB,MAAME,UAAY,IAsCxBK,EAAgB,6BAsEhBC,EAAiB,SAAwBC,EAAWC,EAAaC,EAAgBC,GAEnF,IAAIC,EAAWJ,EAAUK,IACrBC,EAAcN,EAAUO,OAExBC,EAAiBP,EAAYI,IAG7BI,EAAcD,EAAiB,GAG/BE,EAFqC,IAHjBC,KAAKC,IAAIX,EAAYM,OAAQJ,EAAiBD,GAK9BI,EACpCO,EAAgBJ,EAAcL,EAE9BU,EAAsBH,KAAKI,MAAML,EAAmB,GAAKA,EAAmBG,EAAgB,GAAKA,EAAgB,GAGjHG,EAAeL,KAAKC,IAAIE,EAAqBV,EAAWI,GAExDS,EADWN,KAAKO,IAAIF,GAzBA,GA4BxB,MAAO,CACLA,aAAcA,EACdG,eAHmBR,KAAKC,IAAI,IAAKD,KAAKS,IAAI,IAAKH,IAI/CI,cAAenB,EACfoB,WAAwC,GAA1BlB,EAAWK,KAqCzBc,EAAa,SAAoBvD,EAAaC,EAASuD,EAAWC,EAAUvB,GAC9E,OAAOwB,OAAO/D,EAAsD,EAA7D+D,MAAgE,OAAQ,OAAQ,GAAQ,WAC7F,IAAIC,EAAYC,EAAwBC,EAAiBC,EAA+BC,EAAUC,EAElG,OAAON,OAAO/D,EAAwD,EAA/D+D,CAAkExE,MAAM,SAAU+E,GACvF,OAAQA,EAAGC,OACT,KAAK,EACH,OAAKV,GAAcC,GAMnBE,EAhFU,SAAuB3D,EAAawD,EAAWtB,GACjE,IAAIiC,EAASnE,EAAYoE,QAAQ,wBAA0BpE,EAC3D,OAAO+B,EAAeoC,EAAOE,wBAAyBb,EAAUa,wBAAyBnC,EAAgBlC,EAAYqB,cAAciD,YAAYC,aA8E1HC,CAAcxE,EAAawD,GAAaC,EAAUvB,GAE3DsB,GAAab,KAAKO,IAAIS,EAAWX,cAAgB,GAGnD/C,EAAQwE,QACD,CAAC,KAQV1E,EAAcC,EAAaC,GAAS,EAAM0D,EAAWL,YACrDrD,EAAQwE,QACgB,qBAAXC,OAAgC,CAAC,EAE5C,IAEFb,EAAkB,WAChB,OAAOH,OAAO/D,EAAsD,EAA7D+D,MAAgE,OAAQ,OAAQ,GAAQ,WAC7F,OAAOA,OAAO/D,EAAwD,EAA/D+D,CAAkExE,MAAM,SAAU+E,GACvF,OAAQA,EAAGC,OACT,KAAK,EAQH,YAN+BS,IAA3Bf,GACFgB,aAAahB,GAGfc,OAAOG,oBAAoB,qBAAsBf,GACjDY,OAAOG,oBAAoB,qBAAsBhB,GAC5CL,EAGE,CAAC,EAENA,EAAUsB,cAAc,EAAGnB,EAAWX,aAAcW,EAAWR,iBAL1C,CAAC,EAEtB,GAKJ,KAAK,EACHc,EAAGc,OAEHd,EAAGC,MAAQ,EAEb,KAAK,EAMH,OAHAnE,EAAcC,EAAaC,GAAS,EAAO0D,EAAWL,YAEtDrD,EAAQwE,QACD,CAAC,WAQlBX,EAAgC,WAC9BY,OAAOG,oBAAoB,qBAAsBf,GACjDY,OAAOM,iBAAiB,qBAAsBnB,IAG3CL,EAGE,CAAC,EAENA,EAAUyB,oBALW,CAAC,EAEtB,MAtEO,CAAC,GA2EZ,KAAK,EAIH,GAHAlB,EAAWE,EAAGc,OACdf,EAAoBD,EAASmB,aAAenB,EAASoB,aAEjDxB,EAAWX,aAAegB,EAAoBD,EAASqB,UAsBzD,MAhBqB,aAAjBnF,EAAQoF,MAEV1B,EAAWX,cAAgB,GAC3B0B,OAAOM,iBAAiB,qBAAsBlB,IAE9CY,OAAOM,iBAAiB,qBAAsBnB,GAUhDD,EAAyB0B,WAAWzB,EAAiB,KAC9C,CAAC,GAKVI,EAAGC,MAAQ,EAEb,KAAK,EACHL,IAEAI,EAAGC,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,WAQdqB,EAAkB,SAAyBC,EAAWC,EAAYC,GACpE,GAAID,GAAcC,EAAU,CAC1B,IAAIC,EAASF,EAAWG,EAAIF,EAASE,EACjCC,EAASJ,EAAWK,EAAIJ,EAASI,EAErC,OADeH,EAASA,EAASE,EAASA,EACxBL,EAAYA,EAGhC,OAAO,GAwBLO,EAAmB,SAA0BvF,EAAO0B,GACtD,GAAsB,UAAlB1B,EAAMwF,WAINxF,EAAMyF,eAAiD,cAAhCzF,EAAMyF,cAAcD,YAI3CxF,EAAMyF,gBAAiBzF,EAAMyF,cAAcA,eAA+D,kBAA9CzF,EAAMyF,cAAcA,cAAcD,SAAlG,CAIA,IAAIE,EAAK1F,EAAM4D,QAAQ,eAEvB,GAAW,OAAP8B,EAAJ,CAIA,IAAIC,EAAQD,EAAoB,iBAE5BC,GACFvB,aAAauB,GAGXjE,EAAiB,EACnBgE,EAAG3E,MAAM6E,YAAY,oBAAqBlE,EAAiB,MAE3DgE,EAAoB,iBAAIZ,YAAW,WACjCY,EAAG3E,MAAM6E,YAAY,oBAAqB,SACzC,QAOH1G,EAAkB,SAAyB2G,GAC7C,IAAIC,EAAMC,SACNrE,EAAiBmE,EAAOG,UAAU,iBAAkB,KACpDC,EAAeJ,EAAOK,WAAW,gBAAgB,GACjDC,EAAYN,EAAOK,WAAW,qBAAqB,GACnDE,EAAgBP,EAAOK,WAAW,iBAAiB,GACnDrD,EAAgBgD,EAAOK,WAAW,iBAAiB,GACnDG,EAASC,MAAMC,KAAKT,EAAIU,iBAAiB,4BACzCC,EAAe,IAAInH,QACnBoH,EAAkB,IAAIpH,QAEtBqH,EAAgB,SAAuBnH,GACzC,OAAO0D,OAAO/D,EAAsD,EAA7D+D,MAAgE,OAAQ,OAAQ,GAAQ,WAC7F,IAAI0D,EAAWnH,EAAS8D,EAAUN,EAAgB4D,EAClD,OAAO3D,OAAO/D,EAAwD,EAA/D+D,CAAkExE,MAAM,SAAU+E,GACvF,OAAQA,EAAGC,OACT,KAAK,EACH,OAAKlE,EAAYsH,iBAGV,CAAC,EAENtH,EAAYsH,oBAL4B,CAAC,EAEzC,GAKJ,KAAK,EACHrD,EAAGc,OAEHd,EAAGC,MAAQ,EAEb,KAAK,EAMH,OALAkD,EAAYpH,EAAYuH,YAAcvH,EACtCC,EAAUmH,EAAUI,cAAc,UAAYJ,EAAUI,cAAc,YACtEzD,EAAW/D,EAAYoE,QAAQ,eAC/BX,EAAYM,EAA+C,KAApC/D,EAAYoE,QAAQ,cAEtCnE,GAMC8D,GAAY4C,IAAcM,EAAa7G,IAAIJ,KAC/CqH,EAxZgB,SAAiCrH,EAAaC,EAAS8D,GACnF,IAAKA,IAAa9D,EAChB,OAAO,aAKT,IAAIwH,EAAkB,SAAyBC,GACzCnH,EAAUN,IACZF,EAAcC,EAAaC,EAASyH,IAIpCC,EAAS,WACX,OAAO5H,EAAcC,EAAaC,GAAS,IAGzC0G,EAAY,WACd,OAAOc,GAAgB,IAGrBG,EAAY,WACd,OAAOH,GAAgB,IAMzB,OAHA/D,OAAO9D,EAAqD,EAA5D8D,CAA+DK,EAAU,iBAAkB4C,GAC3FjD,OAAO9D,EAAqD,EAA5D8D,CAA+DK,EAAU,eAAgB6D,GACzF3H,EAAQ+E,iBAAiB,OAAQ2C,GAC1B,WACLjE,OAAO9D,EAAqD,EAA5D8D,CAA+DK,EAAU,iBAAkB4C,GAC3FjD,OAAO9D,EAAqD,EAA5D8D,CAA+DK,EAAU,eAAgB6D,GACzF3H,EAAQ+E,iBAAiB,UAAW2C,IAyXnBE,CAAwB7H,EAAaC,EAAS8D,GACrDkD,EAAa9F,IAAInB,EAAaqH,KAGzBtD,GAAcN,IAAagD,IAAiBS,EAAgB9G,IAAIJ,KACrEqH,EAvRW,SAA4BrH,EAAaC,EAASuD,EAAWC,EAAUvB,GAC9F,IAAI4F,EAEAC,EAAa,SAAoBC,GACnCF,EAAQpE,OAAO9D,EAA6D,EAApE8D,CAAuEsE,IAG7EC,EAAW,SAAkBD,GAE/B,GAAKF,EAAL,CAKA,IAAIpC,EAAWhC,OAAO9D,EAA6D,EAApE8D,CAAuEsE,GAGjFzC,EAAgB,EAAGuC,EAAOpC,IAAcnF,EAAUN,KACrD+H,EAAGE,iBACHF,EAAGG,kBAEH5E,EAAWvD,EAAaC,EAASuD,EAAWC,EAAUvB,MAM1D,OAFAlC,EAAYgF,iBAAiB,aAAc+C,GAAY,GACvD/H,EAAYgF,iBAAiB,WAAYiD,GAAU,GAC5C,WACLjI,EAAY6E,oBAAoB,aAAckD,GAAY,GAC1D/H,EAAY6E,oBAAoB,WAAYoD,GAAU,IA0PrCG,CAAmBpI,EAAaC,EAAS8D,EAAUN,EAAUvB,GACpEgF,EAAgB/F,IAAInB,EAAaqH,IAG5B,CAAC,IAfC,CAAC,WA6ChBT,GA1ZoB,WACxB,IAAIyB,GAAU,EACVC,GAAY,EACZhC,EAAMC,SAENgC,EAAW,WACbD,GAAY,GAGVE,EAAY,WACdH,GAAU,GAGRI,EAAa,SAAoBT,GAEnC,GAAIM,EACFA,GAAY,MADd,CAKA,IAAII,EAASpC,EAAI5F,cAEjB,GAAKgI,IAKDA,EAAOC,QAAQ7G,GAAnB,CAKA,IAAI8G,EAASZ,EAAGa,OAEZD,IAAWF,IAIXE,EAAOD,QAAQ7G,IAAkB8G,EAAOxE,QAAQtC,KAIpDuG,GAAU,EAEV/C,YAAW,WACJ+C,GACHK,EAAOI,SAER,SAGLpF,OAAO9D,EAAqD,EAA5D8D,CAA+D4C,EAAK,iBAAkBiC,GACtFjC,EAAItB,iBAAiB,UAAWwD,GAAW,GAC3ClC,EAAItB,iBAAiB,WAAYyD,GAAY,GAsW3CM,GAGE1F,GA7IoB,SAA6BnB,GACrD,IAAIoE,EAAMC,SAENiC,EAAY,SAAmBR,GACjCjC,EAAiBiC,EAAGa,OAAQ3G,IAG1B8G,EAAa,SAAoBhB,GACnCjC,EAAiBiC,EAAGa,OAAQ,IAG9BvC,EAAItB,iBAAiB,UAAWwD,GAChClC,EAAItB,iBAAiB,WAAYgE,GAkI/BC,CAAoB/G,GAMtB,IAAK,IAAIgH,EAAK,EAAGC,EAAWtC,EAAQqC,EAAKC,EAASC,OAAQF,IAAM,CAC9D,IAAI1I,EAAQ2I,EAASD,GACrB/B,EAAc3G,GAGhB8F,EAAItB,iBAAiB,mBAAmB,SAAUgD,GAChDb,EAAca,EAAGqB,WAEnB/C,EAAItB,iBAAiB,qBAAqB,SAAUgD,IAzC9B,SAAyBhI,GAE3C,IAUIsJ,EAXF3C,KACE2C,EAAKrC,EAAatF,IAAI3B,KAGxBsJ,IAGFrC,EAAarF,OAAO5B,IAGlByG,KACE6C,EAAKpC,EAAgBvF,IAAI3B,KAG3BsJ,IAGFpC,EAAgBtF,OAAO5B,IAwBzBuJ,CAAgBvB,EAAGqB"},"input":"(this[\"webpackJsonpMorgan_site_project\"] = this[\"webpackJsonpMorgan_site_project\"] || []).push([[42],{\n\n/***/ 165:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"startInputShims\", function() { return startInputShims; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22);\n\n\nvar cloneMap = new WeakMap();\n\nvar relocateInput = function relocateInput(componentEl, inputEl, shouldRelocate, inputRelativeY) {\n  if (inputRelativeY === void 0) {\n    inputRelativeY = 0;\n  }\n\n  if (cloneMap.has(componentEl) === shouldRelocate) {\n    return;\n  }\n\n  if (shouldRelocate) {\n    addClone(componentEl, inputEl, inputRelativeY);\n  } else {\n    removeClone(componentEl, inputEl);\n  }\n};\n\nvar isFocused = function isFocused(input) {\n  return input === input.getRootNode().activeElement;\n};\n\nvar addClone = function addClone(componentEl, inputEl, inputRelativeY) {\n  // this allows for the actual input to receive the focus from\n  // the user's touch event, but before it receives focus, it\n  // moves the actual input to a location that will not screw\n  // up the app's layout, and does not allow the native browser\n  // to attempt to scroll the input into place (messing up headers/footers)\n  // the cloned input fills the area of where native input should be\n  // while the native input fakes out the browser by relocating itself\n  // before it receives the actual focus event\n  // We hide the focused input (with the visible caret) invisible by making it scale(0),\n  var parentEl = inputEl.parentNode; // DOM WRITES\n\n  var clonedEl = inputEl.cloneNode(false);\n  clonedEl.classList.add('cloned-input');\n  clonedEl.tabIndex = -1;\n  parentEl.appendChild(clonedEl);\n  cloneMap.set(componentEl, clonedEl);\n  var doc = componentEl.ownerDocument;\n  var tx = doc.dir === 'rtl' ? 9999 : -9999;\n  componentEl.style.pointerEvents = 'none';\n  inputEl.style.transform = \"translate3d(\" + tx + \"px,\" + inputRelativeY + \"px,0) scale(0)\";\n};\n\nvar removeClone = function removeClone(componentEl, inputEl) {\n  var clone = cloneMap.get(componentEl);\n\n  if (clone) {\n    cloneMap.delete(componentEl);\n    clone.remove();\n  }\n\n  componentEl.style.pointerEvents = '';\n  inputEl.style.transform = '';\n};\n\nvar enableHideCaretOnScroll = function enableHideCaretOnScroll(componentEl, inputEl, scrollEl) {\n  if (!scrollEl || !inputEl) {\n    return function () {\n      return;\n    };\n  }\n\n  var scrollHideCaret = function scrollHideCaret(shouldHideCaret) {\n    if (isFocused(inputEl)) {\n      relocateInput(componentEl, inputEl, shouldHideCaret);\n    }\n  };\n\n  var onBlur = function onBlur() {\n    return relocateInput(componentEl, inputEl, false);\n  };\n\n  var hideCaret = function hideCaret() {\n    return scrollHideCaret(true);\n  };\n\n  var showCaret = function showCaret() {\n    return scrollHideCaret(false);\n  };\n\n  Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[\"a\"])(scrollEl, 'ionScrollStart', hideCaret);\n  Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[\"a\"])(scrollEl, 'ionScrollEnd', showCaret);\n  inputEl.addEventListener('blur', onBlur);\n  return function () {\n    Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[\"b\"])(scrollEl, 'ionScrollStart', hideCaret);\n    Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[\"b\"])(scrollEl, 'ionScrollEnd', showCaret);\n    inputEl.addEventListener('ionBlur', onBlur);\n  };\n};\n\nvar SKIP_SELECTOR = 'input, textarea, [no-blur]';\n\nvar enableInputBlurring = function enableInputBlurring() {\n  var focused = true;\n  var didScroll = false;\n  var doc = document;\n\n  var onScroll = function onScroll() {\n    didScroll = true;\n  };\n\n  var onFocusin = function onFocusin() {\n    focused = true;\n  };\n\n  var onTouchend = function onTouchend(ev) {\n    // if app did scroll return early\n    if (didScroll) {\n      didScroll = false;\n      return;\n    }\n\n    var active = doc.activeElement;\n\n    if (!active) {\n      return;\n    } // only blur if the active element is a text-input or a textarea\n\n\n    if (active.matches(SKIP_SELECTOR)) {\n      return;\n    } // if the selected target is the active element, do not blur\n\n\n    var tapped = ev.target;\n\n    if (tapped === active) {\n      return;\n    }\n\n    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {\n      return;\n    }\n\n    focused = false; // TODO: find a better way, why 50ms?\n\n    setTimeout(function () {\n      if (!focused) {\n        active.blur();\n      }\n    }, 50);\n  };\n\n  Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[\"a\"])(doc, 'ionScrollStart', onScroll);\n  doc.addEventListener('focusin', onFocusin, true);\n  doc.addEventListener('touchend', onTouchend, false);\n  return function () {\n    Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[\"b\"])(doc, 'ionScrollStart', onScroll, true);\n    doc.removeEventListener('focusin', onFocusin, true);\n    doc.removeEventListener('touchend', onTouchend, false);\n  };\n};\n\nvar SCROLL_ASSIST_SPEED = 0.3;\n\nvar getScrollData = function getScrollData(componentEl, contentEl, keyboardHeight) {\n  var itemEl = componentEl.closest('ion-item,[ion-item]') || componentEl;\n  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);\n};\n\nvar calcScrollData = function calcScrollData(inputRect, contentRect, keyboardHeight, platformHeight) {\n  // compute input's Y values relative to the body\n  var inputTop = inputRect.top;\n  var inputBottom = inputRect.bottom; // compute visible area\n\n  var visibleAreaTop = contentRect.top;\n  var visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area\n\n  var safeAreaTop = visibleAreaTop + 15;\n  var safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area\n\n  var distanceToBottom = safeAreaBottom - inputBottom;\n  var distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.\n\n  var desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input\n  // gets focus, so make sure we don't scroll the input above the visible area\n\n  var scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);\n  var distance = Math.abs(scrollAmount);\n  var duration = distance / SCROLL_ASSIST_SPEED;\n  var scrollDuration = Math.min(400, Math.max(150, duration));\n  return {\n    scrollAmount: scrollAmount,\n    scrollDuration: scrollDuration,\n    scrollPadding: keyboardHeight,\n    inputSafeY: -(inputTop - safeAreaTop) + 4\n  };\n};\n\nvar enableScrollAssist = function enableScrollAssist(componentEl, inputEl, contentEl, footerEl, keyboardHeight) {\n  var coord;\n\n  var touchStart = function touchStart(ev) {\n    coord = Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[/* p */ \"m\"])(ev);\n  };\n\n  var touchEnd = function touchEnd(ev) {\n    // input cover touchend/mouseup\n    if (!coord) {\n      return;\n    } // get where the touchend/mouseup ended\n\n\n    var endCoord = Object(_helpers_47d562d2_js__WEBPACK_IMPORTED_MODULE_1__[/* p */ \"m\"])(ev); // focus this input if the pointer hasn't moved XX pixels\n    // and the input doesn't already have focus\n\n    if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {\n      ev.preventDefault();\n      ev.stopPropagation(); // begin the input focus process\n\n      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight);\n    }\n  };\n\n  componentEl.addEventListener('touchstart', touchStart, true);\n  componentEl.addEventListener('touchend', touchEnd, true);\n  return function () {\n    componentEl.removeEventListener('touchstart', touchStart, true);\n    componentEl.removeEventListener('touchend', touchEnd, true);\n  };\n};\n\nvar jsSetFocus = function jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight) {\n  return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(void 0, void 0, void 0, function () {\n    var scrollData, scrollContentTimeout_1, _scrollContent_, _doubleKeyboardEventListener_, scrollEl, totalScrollAmount;\n\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (!contentEl && !footerEl) {\n            return [2\n            /*return*/\n            ];\n          }\n\n          scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);\n\n          if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {\n            // the text input is in a safe position that doesn't\n            // require it to be scrolled into view, just set focus now\n            inputEl.focus();\n            return [2\n            /*return*/\n            ];\n          } // temporarily move the focus to the focus holder so the browser\n          // doesn't freak out while it's trying to get the input in place\n          // at this point the native text input still does not have focus\n\n\n          relocateInput(componentEl, inputEl, true, scrollData.inputSafeY);\n          inputEl.focus();\n          if (!(typeof window !== 'undefined')) return [3\n          /*break*/\n          , 3];\n\n          _scrollContent_ = function scrollContent_1() {\n            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(void 0, void 0, void 0, function () {\n              return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_a) {\n                switch (_a.label) {\n                  case 0:\n                    // clean up listeners and timeouts\n                    if (scrollContentTimeout_1 !== undefined) {\n                      clearTimeout(scrollContentTimeout_1);\n                    }\n\n                    window.removeEventListener('ionKeyboardDidShow', _doubleKeyboardEventListener_);\n                    window.removeEventListener('ionKeyboardDidShow', _scrollContent_);\n                    if (!contentEl) return [3\n                    /*break*/\n                    , 2];\n                    return [4\n                    /*yield*/\n                    , contentEl.scrollByPoint(0, scrollData.scrollAmount, scrollData.scrollDuration)];\n\n                  case 1:\n                    _a.sent();\n\n                    _a.label = 2;\n\n                  case 2:\n                    // the scroll view is in the correct position now\n                    // give the native text input focus\n                    relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input\n\n                    inputEl.focus();\n                    return [2\n                    /*return*/\n                    ];\n                }\n              });\n            });\n          };\n\n          _doubleKeyboardEventListener_ = function doubleKeyboardEventListener_1() {\n            window.removeEventListener('ionKeyboardDidShow', _doubleKeyboardEventListener_);\n            window.addEventListener('ionKeyboardDidShow', _scrollContent_);\n          };\n\n          if (!contentEl) return [3\n          /*break*/\n          , 2];\n          return [4\n          /*yield*/\n          , contentEl.getScrollElement()];\n\n        case 1:\n          scrollEl = _a.sent();\n          totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;\n\n          if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {\n            /**\n             * On iOS devices, the system will show a \"Passwords\" bar above the keyboard\n             * after the initial keyboard is shown. This prevents the webview from resizing\n             * until the \"Passwords\" bar is shown, so we need to wait for that to happen first.\n             */\n            if (inputEl.type === 'password') {\n              // Add 50px to account for the \"Passwords\" bar\n              scrollData.scrollAmount += 50;\n              window.addEventListener('ionKeyboardDidShow', _doubleKeyboardEventListener_);\n            } else {\n              window.addEventListener('ionKeyboardDidShow', _scrollContent_);\n            }\n            /**\n             * This should only fire in 2 instances:\n             * 1. The app is very slow.\n             * 2. The app is running in a browser on an old OS\n             * that does not support Ionic Keyboard Events\n             */\n\n\n            scrollContentTimeout_1 = setTimeout(_scrollContent_, 1000);\n            return [2\n            /*return*/\n            ];\n          }\n\n          _a.label = 2;\n\n        case 2:\n          _scrollContent_();\n\n          _a.label = 3;\n\n        case 3:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n\nvar hasPointerMoved = function hasPointerMoved(threshold, startCoord, endCoord) {\n  if (startCoord && endCoord) {\n    var deltaX = startCoord.x - endCoord.x;\n    var deltaY = startCoord.y - endCoord.y;\n    var distance = deltaX * deltaX + deltaY * deltaY;\n    return distance > threshold * threshold;\n  }\n\n  return false;\n};\n\nvar PADDING_TIMER_KEY = '$ionPaddingTimer';\n\nvar enableScrollPadding = function enableScrollPadding(keyboardHeight) {\n  var doc = document;\n\n  var onFocusin = function onFocusin(ev) {\n    setScrollPadding(ev.target, keyboardHeight);\n  };\n\n  var onFocusout = function onFocusout(ev) {\n    setScrollPadding(ev.target, 0);\n  };\n\n  doc.addEventListener('focusin', onFocusin);\n  doc.addEventListener('focusout', onFocusout);\n  return function () {\n    doc.removeEventListener('focusin', onFocusin);\n    doc.removeEventListener('focusout', onFocusout);\n  };\n};\n\nvar setScrollPadding = function setScrollPadding(input, keyboardHeight) {\n  if (input.tagName !== 'INPUT') {\n    return;\n  }\n\n  if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {\n    return;\n  }\n\n  if (input.parentElement && input.parentElement.parentElement && input.parentElement.parentElement.tagName === 'ION-SEARCHBAR') {\n    return;\n  }\n\n  var el = input.closest('ion-content');\n\n  if (el === null) {\n    return;\n  }\n\n  var timer = el[PADDING_TIMER_KEY];\n\n  if (timer) {\n    clearTimeout(timer);\n  }\n\n  if (keyboardHeight > 0) {\n    el.style.setProperty('--keyboard-offset', keyboardHeight + \"px\");\n  } else {\n    el[PADDING_TIMER_KEY] = setTimeout(function () {\n      el.style.setProperty('--keyboard-offset', '0px');\n    }, 120);\n  }\n};\n\nvar INPUT_BLURRING = true;\nvar SCROLL_PADDING = true;\n\nvar startInputShims = function startInputShims(config) {\n  var doc = document;\n  var keyboardHeight = config.getNumber('keyboardHeight', 290);\n  var scrollAssist = config.getBoolean('scrollAssist', true);\n  var hideCaret = config.getBoolean('hideCaretOnScroll', true);\n  var inputBlurring = config.getBoolean('inputBlurring', true);\n  var scrollPadding = config.getBoolean('scrollPadding', true);\n  var inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));\n  var hideCaretMap = new WeakMap();\n  var scrollAssistMap = new WeakMap();\n\n  var registerInput = function registerInput(componentEl) {\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(void 0, void 0, void 0, function () {\n      var inputRoot, inputEl, scrollEl, footerEl, rmFn, rmFn;\n      return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!componentEl.componentOnReady) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , componentEl.componentOnReady()];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            inputRoot = componentEl.shadowRoot || componentEl;\n            inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');\n            scrollEl = componentEl.closest('ion-content');\n            footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;\n\n            if (!inputEl) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {\n              rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);\n              hideCaretMap.set(componentEl, rmFn);\n            }\n\n            if ((!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {\n              rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight);\n              scrollAssistMap.set(componentEl, rmFn);\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  var unregisterInput = function unregisterInput(componentEl) {\n    if (hideCaret) {\n      var fn = hideCaretMap.get(componentEl);\n\n      if (fn) {\n        fn();\n      }\n\n      hideCaretMap.delete(componentEl);\n    }\n\n    if (scrollAssist) {\n      var fn = scrollAssistMap.get(componentEl);\n\n      if (fn) {\n        fn();\n      }\n\n      scrollAssistMap.delete(componentEl);\n    }\n  };\n\n  if (inputBlurring && INPUT_BLURRING) {\n    enableInputBlurring();\n  }\n\n  if (scrollPadding && SCROLL_PADDING) {\n    enableScrollPadding(keyboardHeight);\n  } // Input might be already loaded in the DOM before ion-device-hacks did.\n  // At this point we need to look for all of the inputs not registered yet\n  // and register them.\n\n\n  for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n    var input = inputs_1[_i];\n    registerInput(input);\n  }\n\n  doc.addEventListener('ionInputDidLoad', function (ev) {\n    registerInput(ev.detail);\n  });\n  doc.addEventListener('ionInputDidUnload', function (ev) {\n    unregisterInput(ev.detail);\n  });\n};\n\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/drew/Documents/Development/Morgan_Site/MoShops/node_modules/@ionic/core/dist/esm-es5/input-shims-ba28b23a.js"],"names":["cloneMap","WeakMap","relocateInput","componentEl","inputEl","shouldRelocate","inputRelativeY","has","addClone","removeClone","isFocused","input","getRootNode","activeElement","parentEl","parentNode","clonedEl","cloneNode","classList","add","tabIndex","appendChild","set","doc","ownerDocument","tx","dir","style","pointerEvents","transform","clone","get","delete","remove","enableHideCaretOnScroll","scrollEl","scrollHideCaret","shouldHideCaret","onBlur","hideCaret","showCaret","addEventListener","removeEventListener","SKIP_SELECTOR","enableInputBlurring","focused","didScroll","document","onScroll","onFocusin","onTouchend","ev","active","matches","tapped","target","closest","setTimeout","blur","SCROLL_ASSIST_SPEED","getScrollData","contentEl","keyboardHeight","itemEl","calcScrollData","getBoundingClientRect","defaultView","innerHeight","inputRect","contentRect","platformHeight","inputTop","top","inputBottom","bottom","visibleAreaTop","visibleAreaBottom","Math","min","safeAreaTop","safeAreaBottom","distanceToBottom","distanceToTop","desiredScrollAmount","round","scrollAmount","distance","abs","duration","scrollDuration","max","scrollPadding","inputSafeY","enableScrollAssist","footerEl","coord","touchStart","pointerCoord","touchEnd","endCoord","hasPointerMoved","preventDefault","stopPropagation","jsSetFocus","__awaiter","scrollData","scrollContentTimeout_1","scrollContent_1","doubleKeyboardEventListener_1","totalScrollAmount","__generator","_a","label","focus","window","undefined","clearTimeout","scrollByPoint","sent","getScrollElement","scrollHeight","clientHeight","scrollTop","type","threshold","startCoord","deltaX","x","deltaY","y","PADDING_TIMER_KEY","enableScrollPadding","setScrollPadding","onFocusout","tagName","parentElement","el","timer","setProperty","INPUT_BLURRING","SCROLL_PADDING","startInputShims","config","getNumber","scrollAssist","getBoolean","inputBlurring","inputs","Array","from","querySelectorAll","hideCaretMap","scrollAssistMap","registerInput","inputRoot","rmFn","componentOnReady","shadowRoot","querySelector","unregisterInput","fn","_i","inputs_1","length","detail"],"mappings":"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","file":"x","sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nimport { a as addEventListener, b as removeEventListener, p as pointerCoord } from './helpers-47d562d2.js';\nvar cloneMap = new WeakMap();\nvar relocateInput = function (componentEl, inputEl, shouldRelocate, inputRelativeY) {\n    if (inputRelativeY === void 0) { inputRelativeY = 0; }\n    if (cloneMap.has(componentEl) === shouldRelocate) {\n        return;\n    }\n    if (shouldRelocate) {\n        addClone(componentEl, inputEl, inputRelativeY);\n    }\n    else {\n        removeClone(componentEl, inputEl);\n    }\n};\nvar isFocused = function (input) {\n    return input === input.getRootNode().activeElement;\n};\nvar addClone = function (componentEl, inputEl, inputRelativeY) {\n    // this allows for the actual input to receive the focus from\n    // the user's touch event, but before it receives focus, it\n    // moves the actual input to a location that will not screw\n    // up the app's layout, and does not allow the native browser\n    // to attempt to scroll the input into place (messing up headers/footers)\n    // the cloned input fills the area of where native input should be\n    // while the native input fakes out the browser by relocating itself\n    // before it receives the actual focus event\n    // We hide the focused input (with the visible caret) invisible by making it scale(0),\n    var parentEl = inputEl.parentNode;\n    // DOM WRITES\n    var clonedEl = inputEl.cloneNode(false);\n    clonedEl.classList.add('cloned-input');\n    clonedEl.tabIndex = -1;\n    parentEl.appendChild(clonedEl);\n    cloneMap.set(componentEl, clonedEl);\n    var doc = componentEl.ownerDocument;\n    var tx = doc.dir === 'rtl' ? 9999 : -9999;\n    componentEl.style.pointerEvents = 'none';\n    inputEl.style.transform = \"translate3d(\" + tx + \"px,\" + inputRelativeY + \"px,0) scale(0)\";\n};\nvar removeClone = function (componentEl, inputEl) {\n    var clone = cloneMap.get(componentEl);\n    if (clone) {\n        cloneMap.delete(componentEl);\n        clone.remove();\n    }\n    componentEl.style.pointerEvents = '';\n    inputEl.style.transform = '';\n};\nvar enableHideCaretOnScroll = function (componentEl, inputEl, scrollEl) {\n    if (!scrollEl || !inputEl) {\n        return function () { return; };\n    }\n    var scrollHideCaret = function (shouldHideCaret) {\n        if (isFocused(inputEl)) {\n            relocateInput(componentEl, inputEl, shouldHideCaret);\n        }\n    };\n    var onBlur = function () { return relocateInput(componentEl, inputEl, false); };\n    var hideCaret = function () { return scrollHideCaret(true); };\n    var showCaret = function () { return scrollHideCaret(false); };\n    addEventListener(scrollEl, 'ionScrollStart', hideCaret);\n    addEventListener(scrollEl, 'ionScrollEnd', showCaret);\n    inputEl.addEventListener('blur', onBlur);\n    return function () {\n        removeEventListener(scrollEl, 'ionScrollStart', hideCaret);\n        removeEventListener(scrollEl, 'ionScrollEnd', showCaret);\n        inputEl.addEventListener('ionBlur', onBlur);\n    };\n};\nvar SKIP_SELECTOR = 'input, textarea, [no-blur]';\nvar enableInputBlurring = function () {\n    var focused = true;\n    var didScroll = false;\n    var doc = document;\n    var onScroll = function () {\n        didScroll = true;\n    };\n    var onFocusin = function () {\n        focused = true;\n    };\n    var onTouchend = function (ev) {\n        // if app did scroll return early\n        if (didScroll) {\n            didScroll = false;\n            return;\n        }\n        var active = doc.activeElement;\n        if (!active) {\n            return;\n        }\n        // only blur if the active element is a text-input or a textarea\n        if (active.matches(SKIP_SELECTOR)) {\n            return;\n        }\n        // if the selected target is the active element, do not blur\n        var tapped = ev.target;\n        if (tapped === active) {\n            return;\n        }\n        if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {\n            return;\n        }\n        focused = false;\n        // TODO: find a better way, why 50ms?\n        setTimeout(function () {\n            if (!focused) {\n                active.blur();\n            }\n        }, 50);\n    };\n    addEventListener(doc, 'ionScrollStart', onScroll);\n    doc.addEventListener('focusin', onFocusin, true);\n    doc.addEventListener('touchend', onTouchend, false);\n    return function () {\n        removeEventListener(doc, 'ionScrollStart', onScroll, true);\n        doc.removeEventListener('focusin', onFocusin, true);\n        doc.removeEventListener('touchend', onTouchend, false);\n    };\n};\nvar SCROLL_ASSIST_SPEED = 0.3;\nvar getScrollData = function (componentEl, contentEl, keyboardHeight) {\n    var itemEl = componentEl.closest('ion-item,[ion-item]') || componentEl;\n    return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);\n};\nvar calcScrollData = function (inputRect, contentRect, keyboardHeight, platformHeight) {\n    // compute input's Y values relative to the body\n    var inputTop = inputRect.top;\n    var inputBottom = inputRect.bottom;\n    // compute visible area\n    var visibleAreaTop = contentRect.top;\n    var visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight);\n    // compute safe area\n    var safeAreaTop = visibleAreaTop + 15;\n    var safeAreaBottom = visibleAreaBottom * 0.75;\n    // figure out if each edge of the input is within the safe area\n    var distanceToBottom = safeAreaBottom - inputBottom;\n    var distanceToTop = safeAreaTop - inputTop;\n    // desiredScrollAmount is the negated distance to the safe area according to our calculations.\n    var desiredScrollAmount = Math.round((distanceToBottom < 0)\n        ? -distanceToBottom\n        : (distanceToTop > 0)\n            ? -distanceToTop\n            : 0);\n    // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input\n    // gets focus, so make sure we don't scroll the input above the visible area\n    var scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);\n    var distance = Math.abs(scrollAmount);\n    var duration = distance / SCROLL_ASSIST_SPEED;\n    var scrollDuration = Math.min(400, Math.max(150, duration));\n    return {\n        scrollAmount: scrollAmount,\n        scrollDuration: scrollDuration,\n        scrollPadding: keyboardHeight,\n        inputSafeY: -(inputTop - safeAreaTop) + 4\n    };\n};\nvar enableScrollAssist = function (componentEl, inputEl, contentEl, footerEl, keyboardHeight) {\n    var coord;\n    var touchStart = function (ev) {\n        coord = pointerCoord(ev);\n    };\n    var touchEnd = function (ev) {\n        // input cover touchend/mouseup\n        if (!coord) {\n            return;\n        }\n        // get where the touchend/mouseup ended\n        var endCoord = pointerCoord(ev);\n        // focus this input if the pointer hasn't moved XX pixels\n        // and the input doesn't already have focus\n        if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            // begin the input focus process\n            jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight);\n        }\n    };\n    componentEl.addEventListener('touchstart', touchStart, true);\n    componentEl.addEventListener('touchend', touchEnd, true);\n    return function () {\n        componentEl.removeEventListener('touchstart', touchStart, true);\n        componentEl.removeEventListener('touchend', touchEnd, true);\n    };\n};\nvar jsSetFocus = function (componentEl, inputEl, contentEl, footerEl, keyboardHeight) { return __awaiter(void 0, void 0, void 0, function () {\n    var scrollData, scrollContentTimeout_1, scrollContent_1, doubleKeyboardEventListener_1, scrollEl, totalScrollAmount;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!contentEl && !footerEl) {\n                    return [2 /*return*/];\n                }\n                scrollData = getScrollData(componentEl, (contentEl || footerEl), keyboardHeight);\n                if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {\n                    // the text input is in a safe position that doesn't\n                    // require it to be scrolled into view, just set focus now\n                    inputEl.focus();\n                    return [2 /*return*/];\n                }\n                // temporarily move the focus to the focus holder so the browser\n                // doesn't freak out while it's trying to get the input in place\n                // at this point the native text input still does not have focus\n                relocateInput(componentEl, inputEl, true, scrollData.inputSafeY);\n                inputEl.focus();\n                if (!(typeof window !== 'undefined')) return [3 /*break*/, 3];\n                scrollContent_1 = function () { return __awaiter(void 0, void 0, void 0, function () {\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                // clean up listeners and timeouts\n                                if (scrollContentTimeout_1 !== undefined) {\n                                    clearTimeout(scrollContentTimeout_1);\n                                }\n                                window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener_1);\n                                window.removeEventListener('ionKeyboardDidShow', scrollContent_1);\n                                if (!contentEl) return [3 /*break*/, 2];\n                                return [4 /*yield*/, contentEl.scrollByPoint(0, scrollData.scrollAmount, scrollData.scrollDuration)];\n                            case 1:\n                                _a.sent();\n                                _a.label = 2;\n                            case 2:\n                                // the scroll view is in the correct position now\n                                // give the native text input focus\n                                relocateInput(componentEl, inputEl, false, scrollData.inputSafeY);\n                                // ensure this is the focused input\n                                inputEl.focus();\n                                return [2 /*return*/];\n                        }\n                    });\n                }); };\n                doubleKeyboardEventListener_1 = function () {\n                    window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener_1);\n                    window.addEventListener('ionKeyboardDidShow', scrollContent_1);\n                };\n                if (!contentEl) return [3 /*break*/, 2];\n                return [4 /*yield*/, contentEl.getScrollElement()];\n            case 1:\n                scrollEl = _a.sent();\n                totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;\n                if (scrollData.scrollAmount > (totalScrollAmount - scrollEl.scrollTop)) {\n                    /**\n                     * On iOS devices, the system will show a \"Passwords\" bar above the keyboard\n                     * after the initial keyboard is shown. This prevents the webview from resizing\n                     * until the \"Passwords\" bar is shown, so we need to wait for that to happen first.\n                     */\n                    if (inputEl.type === 'password') {\n                        // Add 50px to account for the \"Passwords\" bar\n                        scrollData.scrollAmount += 50;\n                        window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener_1);\n                    }\n                    else {\n                        window.addEventListener('ionKeyboardDidShow', scrollContent_1);\n                    }\n                    /**\n                     * This should only fire in 2 instances:\n                     * 1. The app is very slow.\n                     * 2. The app is running in a browser on an old OS\n                     * that does not support Ionic Keyboard Events\n                     */\n                    scrollContentTimeout_1 = setTimeout(scrollContent_1, 1000);\n                    return [2 /*return*/];\n                }\n                _a.label = 2;\n            case 2:\n                scrollContent_1();\n                _a.label = 3;\n            case 3: return [2 /*return*/];\n        }\n    });\n}); };\nvar hasPointerMoved = function (threshold, startCoord, endCoord) {\n    if (startCoord && endCoord) {\n        var deltaX = (startCoord.x - endCoord.x);\n        var deltaY = (startCoord.y - endCoord.y);\n        var distance = deltaX * deltaX + deltaY * deltaY;\n        return distance > (threshold * threshold);\n    }\n    return false;\n};\nvar PADDING_TIMER_KEY = '$ionPaddingTimer';\nvar enableScrollPadding = function (keyboardHeight) {\n    var doc = document;\n    var onFocusin = function (ev) {\n        setScrollPadding(ev.target, keyboardHeight);\n    };\n    var onFocusout = function (ev) {\n        setScrollPadding(ev.target, 0);\n    };\n    doc.addEventListener('focusin', onFocusin);\n    doc.addEventListener('focusout', onFocusout);\n    return function () {\n        doc.removeEventListener('focusin', onFocusin);\n        doc.removeEventListener('focusout', onFocusout);\n    };\n};\nvar setScrollPadding = function (input, keyboardHeight) {\n    if (input.tagName !== 'INPUT') {\n        return;\n    }\n    if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {\n        return;\n    }\n    if (input.parentElement &&\n        input.parentElement.parentElement &&\n        input.parentElement.parentElement.tagName === 'ION-SEARCHBAR') {\n        return;\n    }\n    var el = input.closest('ion-content');\n    if (el === null) {\n        return;\n    }\n    var timer = el[PADDING_TIMER_KEY];\n    if (timer) {\n        clearTimeout(timer);\n    }\n    if (keyboardHeight > 0) {\n        el.style.setProperty('--keyboard-offset', keyboardHeight + \"px\");\n    }\n    else {\n        el[PADDING_TIMER_KEY] = setTimeout(function () {\n            el.style.setProperty('--keyboard-offset', '0px');\n        }, 120);\n    }\n};\nvar INPUT_BLURRING = true;\nvar SCROLL_PADDING = true;\nvar startInputShims = function (config) {\n    var doc = document;\n    var keyboardHeight = config.getNumber('keyboardHeight', 290);\n    var scrollAssist = config.getBoolean('scrollAssist', true);\n    var hideCaret = config.getBoolean('hideCaretOnScroll', true);\n    var inputBlurring = config.getBoolean('inputBlurring', true);\n    var scrollPadding = config.getBoolean('scrollPadding', true);\n    var inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));\n    var hideCaretMap = new WeakMap();\n    var scrollAssistMap = new WeakMap();\n    var registerInput = function (componentEl) { return __awaiter(void 0, void 0, void 0, function () {\n        var inputRoot, inputEl, scrollEl, footerEl, rmFn, rmFn;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!componentEl.componentOnReady) return [3 /*break*/, 2];\n                    return [4 /*yield*/, componentEl.componentOnReady()];\n                case 1:\n                    _a.sent();\n                    _a.label = 2;\n                case 2:\n                    inputRoot = componentEl.shadowRoot || componentEl;\n                    inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');\n                    scrollEl = componentEl.closest('ion-content');\n                    footerEl = (!scrollEl) ? componentEl.closest('ion-footer') : null;\n                    if (!inputEl) {\n                        return [2 /*return*/];\n                    }\n                    if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {\n                        rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);\n                        hideCaretMap.set(componentEl, rmFn);\n                    }\n                    if ((!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {\n                        rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight);\n                        scrollAssistMap.set(componentEl, rmFn);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    var unregisterInput = function (componentEl) {\n        if (hideCaret) {\n            var fn = hideCaretMap.get(componentEl);\n            if (fn) {\n                fn();\n            }\n            hideCaretMap.delete(componentEl);\n        }\n        if (scrollAssist) {\n            var fn = scrollAssistMap.get(componentEl);\n            if (fn) {\n                fn();\n            }\n            scrollAssistMap.delete(componentEl);\n        }\n    };\n    if (inputBlurring && INPUT_BLURRING) {\n        enableInputBlurring();\n    }\n    if (scrollPadding && SCROLL_PADDING) {\n        enableScrollPadding(keyboardHeight);\n    }\n    // Input might be already loaded in the DOM before ion-device-hacks did.\n    // At this point we need to look for all of the inputs not registered yet\n    // and register them.\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        registerInput(input);\n    }\n    doc.addEventListener('ionInputDidLoad', (function (ev) {\n        registerInput(ev.detail);\n    }));\n    doc.addEventListener('ionInputDidUnload', (function (ev) {\n        unregisterInput(ev.detail);\n    }));\n};\nexport { startInputShims };\n"]}}